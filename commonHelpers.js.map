{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport { startPage } from '../main';\nimport { limitPage } from '../main';\n   \nexport async function getImages(query, page) {\n    const url = 'https://pixabay.com/api/';\n    const params = {\n        key: '43037018-42eeb016e636e06528ba4e47a',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horisontal',\n        safesearch: 'true',\n        page: startPage,\n        per_page: limitPage,\n    };\n    \n    const res = await axios.get(url, { params });\n    return res.data; \n};\n\n ","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryList = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n});\n\nexport async function imageTemplate(images) {\n    const galeryMarkup = images.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n      return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href =\"${largeImageURL}\">\n                <img loding=\"lazy\"\n                class=\"gallery-image\"\n                width=\"1280\" height=\"152\"\n                src=\"${webformatURL}\"\n                data-source=\"${largeImageURL}\"\n                alt=\"${tags}\" /></a>\n            <ul class=\"gallery-description\">\n                <li><h3>Likes</h3><p>${likes}</p></li>\n                <li><h3>Views</h3><p>${views}</p></li>\n                <li><h3>Comments</h3><p>${comments}</p></li>\n                <li><h3>Downloads</h3><p>${downloads}</p></li>\n            </ul>\n        </li>`})\n    .join('');\n    galleryList.insertAdjacentHTML('beforeend', galeryMarkup);\n\n    lightbox.refresh();\n}","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages} from './js/pixabay-api';\nimport { imageTemplate } from './js/render-functions';\n\nexport const imgGallery = document.querySelector('.gallery');\nexport const formEl = document.querySelector('.form');\n\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn');\n\nexport let startPage = 1;\nlet query;\nlet totalPages;\nexport let limitPage = 15;\n\nfunction showLoader() {\n    loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n    loader.classList.add('is-hidden');\n}\n\n//---------------------\n\nformEl.addEventListener('submit', inputValue);\nasync function inputValue(e) {\n    e.preventDefault();\n    imgGallery.innerHTML = '';\n    startPage = 1;\n    query = e.currentTarget.elements.image.value.trim();\n    showLoader();\n    if (query === '') {\n        iziToast.warning({\n                maxWidth: '432px',\n                height: '48px',\n                color: 'yellow',\n                position: 'topRight',\n                message: 'Please fill in the field for search!',\n        })\n        return;\n    }\n    try {\n        const data = await getImages(query, startPage)\n        if (data.hits.length === 0) {\n           iziToast.error({\n                maxWidth: '432px',\n                height: '48px',\n                color: 'red',\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            }) \n        }\n        totalPages = Math.ceil(data.totalHits / limitPage);\n        imageTemplate(data.hits);\n        e.target.reset();\n    } catch (error) {\n        console.log(error);\n            iziToast.error({\n                maxWidth: '432px',\n                height: '48px',\n                color: 'red',\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            })\n    }\n    btnLoadMore();\n    hideLoader();\n    e.target.reset();\n}\n    \n//---------------------Load More btn\n\nfunction removeLoadBtn() {\n    loadBtn.classList.remove(\"is-hidden\");\n}\n\nfunction addLoadBtn() {\n    loadBtn.classList.add(\"is-hidden\");\n}\n\nfunction btnLoadMore() {\n    if (startPage >= totalPages) {\n        addLoadBtn();\n    } else {\n        removeLoadBtn();\n    }\n}\n\nfunction scroll() {\n    const position = imgGallery.firstElementChild.getBoundingClientRect().height;\n    scrollBy({\n        top: position,\n        behavior: 'smooth',\n    });\n}\n\n//---------------------\n\nloadBtn.addEventListener('click', clickRequest);\n\nasync function clickRequest() {\n    startPage += 1;\n    showLoader();\n    try {\n        const data = await getImages(query, startPage);\n        imageTemplate(data.hits);\n        if (startPage >= totalPages) {\n            addLoadBtn();\n            iziToast.info({\n                title: 'Info',\n                position: 'topRight',\n                message: 'We are sorry, but you have reached the end of search results.',\n            })\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.info({\n                title: 'Info',\n                position: 'topRight',\n                message: 'We are sorry, but you have reached the end of search results.',\n            })\n    }\n    scroll();\n    btnLoadMore();\n    hideLoader();\n}\n\n\n\n\n"],"names":["getImages","query","page","url","params","startPage","limitPage","axios","galleryList","lightbox","SimpleLightbox","imageTemplate","images","galeryMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imgGallery","formEl","loader","loadBtn","totalPages","showLoader","hideLoader","inputValue","e","iziToast","data","error","btnLoadMore","removeLoadBtn","addLoadBtn","scroll","position","clickRequest"],"mappings":"owBAKO,eAAeA,EAAUC,EAAOC,EAAM,CACzC,MAAMC,EAAM,2BACNC,EAAS,CACX,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMI,EACN,SAAUC,CAClB,EAGI,OADY,MAAMC,EAAM,IAAIJ,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACf,CCbA,MAAMI,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,KAClB,CAAC,EAEM,eAAeC,EAAcC,EAAQ,CACxC,MAAMC,EAAeD,EAAO,IAAI,CAAC,CAAE,cAAAE,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAC9F;AAAA,6CACgCN,CAAa;AAAA;AAAA;AAAA;AAAA,uBAInCC,CAAY;AAAA,+BACJD,CAAa;AAAA,uBACrBE,CAAI;AAAA;AAAA,uCAEYC,CAAK;AAAA,uCACLC,CAAK;AAAA,0CACFC,CAAQ;AAAA,2CACPC,CAAS;AAAA;AAAA,cAErC,EACV,KAAK,EAAE,EACRZ,EAAY,mBAAmB,YAAaK,CAAY,EAExDJ,EAAS,QAAO,CACpB,CCtBO,MAAMY,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAS,SAAS,cAAc,OAAO,EAE9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAE3C,IAAInB,EAAY,EACnBJ,EACAwB,EACOnB,EAAY,GAEvB,SAASoB,GAAa,CAClBH,EAAO,UAAU,OAAO,WAAW,CACvC,CAEA,SAASI,GAAa,CAClBJ,EAAO,UAAU,IAAI,WAAW,CACpC,CAIAD,EAAO,iBAAiB,SAAUM,CAAU,EAC5C,eAAeA,EAAWC,EAAG,CAMzB,GALAA,EAAE,eAAc,EAChBR,EAAW,UAAY,GACvBhB,EAAY,EACZJ,EAAQ4B,EAAE,cAAc,SAAS,MAAM,MAAM,OAC7CH,IACIzB,IAAU,GAAI,CACd6B,EAAS,QAAQ,CACT,SAAU,QACV,OAAQ,OACR,MAAO,SACP,SAAU,WACV,QAAS,sCACzB,CAAS,EACD,MACH,CACD,GAAI,CACA,MAAMC,EAAO,MAAM/B,EAAUC,EAAOI,CAAS,EACzC0B,EAAK,KAAK,SAAW,GACtBD,EAAS,MAAM,CACV,SAAU,QACV,OAAQ,OACR,MAAO,MACP,SAAU,WACV,QAAS,0EACzB,CAAa,EAELL,EAAa,KAAK,KAAKM,EAAK,UAAYzB,CAAS,EACjDK,EAAcoB,EAAK,IAAI,EACvBF,EAAE,OAAO,OACZ,OAAQG,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACbF,EAAS,MAAM,CACX,SAAU,QACV,OAAQ,OACR,MAAO,MACP,SAAU,WACV,QAAS,0EACzB,CAAa,CACR,CACDG,IACAN,IACAE,EAAE,OAAO,OACb,CAIA,SAASK,GAAgB,CACrBV,EAAQ,UAAU,OAAO,WAAW,CACxC,CAEA,SAASW,GAAa,CAClBX,EAAQ,UAAU,IAAI,WAAW,CACrC,CAEA,SAASS,GAAc,CACf5B,GAAaoB,EACbU,IAEAD,GAER,CAEA,SAASE,GAAS,CACd,MAAMC,EAAWhB,EAAW,kBAAkB,sBAAqB,EAAG,OACtE,SAAS,CACL,IAAKgB,EACL,SAAU,QAClB,CAAK,CACL,CAIAb,EAAQ,iBAAiB,QAASc,CAAY,EAE9C,eAAeA,GAAe,CAC1BjC,GAAa,EACbqB,IACA,GAAI,CACA,MAAMK,EAAO,MAAM/B,EAAUC,EAAOI,CAAS,EAC7CM,EAAcoB,EAAK,IAAI,EACnB1B,GAAaoB,IACbU,IACAL,EAAS,KAAK,CACV,MAAO,OACP,SAAU,WACV,QAAS,+DACzB,CAAa,EAER,OAAQE,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBF,EAAS,KAAK,CACN,MAAO,OACP,SAAU,WACV,QAAS,+DACzB,CAAa,CACR,CACDM,IACAH,IACAN,GACJ"}